window.whatInput=function(){function w(){window.clearTimeout(k);l(event);m=!0;k=window.setTimeout(function(){m=!1},650)}function b(a){m||l(a)}function p(a){window.clearTimeout(k);l(a)}function l(a){var b=a.keyCode?a.keyCode:a.which,e=q[a.type];"pointer"===e&&(e="number"===typeof a.pointerType?x[a.pointerType]:"pen"===a.pointerType?"touch":a.pointerType);if(d!==e){var h=a.target||a.srcElement;a=h.nodeName.toLowerCase();h="input"===a?h.getAttribute("type"):null;!c.hasAttribute("data-whatinput-formtyping")&&
d&&"keyboard"===e&&"tab"!==f[b]&&("textarea"===a||"select"===a||"input"===a&&0>y.indexOf(h))||-1<z.indexOf(b)||r(e)}"keyboard"===e&&-1===g.indexOf(f[b])&&f[b]&&g.push(f[b])}function r(a){d=a;c.setAttribute("data-whatinput",d);-1===n.indexOf(d)&&n.push(d)}function A(a){a=g.indexOf(f[a.keyCode?a.keyCode:a.which]);-1!==a&&g.splice(a,1)}function t(){c=document.body;window.PointerEvent?(c.addEventListener("pointerdown",b),c.addEventListener("pointermove",b)):window.MSPointerEvent?(c.addEventListener("MSPointerDown",
b),c.addEventListener("MSPointerMove",b)):(c.addEventListener("mousedown",b),c.addEventListener("mousemove",b),"ontouchstart"in window&&c.addEventListener("touchstart",w));c.addEventListener(u,b);c.addEventListener("keydown",p);c.addEventListener("keyup",p);document.addEventListener("keyup",A)}function v(){return u="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}var g=[],c,m=!1,d=null,y="button checkbox file image radio reset submit".split(" "),
u=v(),z=[16,17,18,91,93],q={keydown:"keyboard",keyup:"keyboard",mousedown:"mouse",mousemove:"mouse",MSPointerDown:"pointer",MSPointerMove:"pointer",pointerdown:"pointer",pointermove:"pointer",touchstart:"touch"};q[v()]="mouse";var n=[],f={9:"tab",13:"enter",16:"shift",27:"esc",32:"space",37:"left",38:"up",39:"right",40:"down"},x={2:"touch",3:"touch",4:"mouse"},k;"addEventListener"in window&&Array.prototype.indexOf&&(document.body?t():document.addEventListener("DOMContentLoaded",t));return{ask:function(){return d},
keys:function(){return g},types:function(){return n},set:r}}();